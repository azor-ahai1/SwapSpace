import{j as e,L as k,F as Y,a as H,b as D,c as xe,d as pe,e as he,r as o,u as I,f as $,g as F,h as ge,i as be,k as B,l as E,m as K,n as ye,o as fe,p as je,q as Ne,s as ve,t as we,v as ke,w as Se,x as Pe,R as Ce,P as Ie,y as Ee,z as Fe,A as Le,B as De,C as $e,D as se,E as q,G as A,H as te,I as re,J as ae,K as qe,M as Q,N as z,O as M,S as Ae,Q as Oe,T as _e,U as G,V as Re,W as Ue,X as Te,Y as X,Z as le,_ as He,$ as Z,a0 as Be,a1 as Qe,a2 as ze,a3 as Me,a4 as Ge,a5 as Je}from"./vendor-B6HnXpgS.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))f(d);new MutationObserver(d=>{for(const m of d)if(m.type==="childList")for(const g of m.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&f(g)}).observe(document,{childList:!0,subtree:!0});function t(d){const m={};return d.integrity&&(m.integrity=d.integrity),d.referrerPolicy&&(m.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?m.credentials="include":d.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function f(d){if(d.ep)return;d.ep=!0;const m=t(d);fetch(d.href,m)}})();const T=({title:s})=>e.jsxs("div",{className:"relative my-16 py-4",children:[e.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:e.jsx("div",{className:"w-full border-t border-dark-primary/50"})}),s&&e.jsx("div",{className:"relative flex justify-center",children:e.jsx("span",{className:"bg-dark-primary px-4 text-light-blue text-sm uppercase tracking-wider",children:s})})]}),We=()=>e.jsxs("div",{className:"min-h-screen bg-gradient-primary text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-light-blue/10 via-dark-primary/20 to-dark-primary/30 animate-pulse"})}),e.jsxs("div",{className:"container mx-auto px-6 py-16 relative z-10",children:[e.jsxs("section",{className:"text-center mb-20",children:[e.jsx("div",{className:"inline-block bg-dark-primary/50 rounded-full px-6 py-2 mb-6 text-light-blue",children:"Buy & Sell Second-Hand Products"}),e.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-6 text-light-blue leading-tight",children:"SwapSpace"}),e.jsx("p",{className:"text-l md:text-2xl max-w-3xl mx-auto text-gray-300 mb-10 leading-relaxed",children:"Connecting Students to Buy and Sell Items Effortlessly"}),e.jsxs("div",{className:"flex justify-center space-x-6",children:[e.jsxs(k,{to:"/signup",className:"flex items-center gap-3 px-10 py-4 text-xl bg-light-blue text-dark-primary rounded-xl font-semibold hover:bg-opacity-90 transition-all group",children:["Get Started",e.jsx(Y,{className:"transform transition-transform group-hover:translate-x-1"})]}),e.jsxs(k,{to:"/products",className:"flex items-center gap-3 px-10 py-4 text-xl border border-light-blue text-light-blue rounded-xl font-semibold hover:bg-light-blue hover:text-dark-primary transition-all group",children:["Browse Products",e.jsx(H,{className:"transform transition-transform group-hover:scale-110"})]})]})]}),e.jsx(T,{title:"Key Features"}),e.jsx("section",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8 mb-20",children:[{icon:D,title:"Easy Listing",description:"Quickly list your used items with detailed descriptions and photos.",color:"text-light-blue",bgGradient:"from-light-blue/10 to-dark-primary"},{icon:xe,title:"Secure Transactions",description:"Safe and transparent buying and selling process.",color:"text-deep-blue",bgGradient:"from-deep-blue/10 to-dark-primary"},{icon:pe,title:"Community Focused",description:"Connect with local buyers and sellers in your community.",color:"text-slate-gray",bgGradient:"from-slate-gray/10 to-dark-primary"},{icon:H,title:"Wide Range of Products",description:"Find everything from electronics to furniture, books, and more.",color:"text-light-blue",bgGradient:"from-light-blue/10 to-dark-primary"}].map((s,r)=>e.jsxs("div",{className:`
                bg-gradient-to-br ${s.bgGradient} 
                rounded-xl p-8 text-center 
                transform transition-all 
                hover:scale-105 hover:shadow-2xl 
                border border-dark-primary/30
              `,children:[e.jsx(s.icon,{className:`mx-auto text-6xl mb-6 ${s.color}`}),e.jsx("h2",{className:"text-2xl font-bold mb-4 text-light-blue",children:s.title}),e.jsx("p",{className:"text-gray-300",children:s.description})]},r))}),e.jsx(T,{title:"How It Works"}),e.jsx("section",{className:"grid md:grid-cols-3 gap-8 mb-20",children:[{step:"1",title:"Create Account",description:"Sign up and verify your profile to start buying or selling."},{step:"2",title:"List or Browse",description:"List your items or browse through available products."},{step:"3",title:"Connect & Trade",description:"Communicate with sellers/buyers and complete your transaction."}].map((s,r)=>e.jsxs("div",{className:`\r
                bg-dark-primary \r
                rounded-xl p-8 \r
                text-center\r
                hover:shadow-2xl \r
                transition-all \r
                border border-dark-primary/30\r
              `,children:[e.jsx("div",{className:"text-6xl font-bold mb-6 text-light-blue",children:s.step}),e.jsx("h3",{className:"text-xl font-bold text-light-blue mb-2",children:s.title}),e.jsx("p",{className:"text-gray-300",children:s.description})]},r))}),e.jsx(T,{title:"Join SwapSpace"}),e.jsxs("section",{className:"text-center bg-dark-primary rounded-xl p-16 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-light-blue/10 to-dark-primary/30 opacity-20"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h2",{className:"text-4xl font-bold mb-6 text-light-blue",children:"Start Your Swapping Journey"}),e.jsx("p",{className:"max-w-2xl mx-auto text-gray-300 mb-10 text-lg",children:"Join SwapSpace today and be part of a community that makes buying and selling second-hand items easy, affordable, and sustainable."}),e.jsxs(k,{to:"/signup",className:`\r
                inline-flex items-center gap-3 \r
                px-12 py-5 text-xl \r
                bg-light-blue text-dark-primary \r
                rounded-xl font-bold \r
                hover:bg-opacity-90 \r
                transition-all \r
                group\r
              `,children:["Sign Up Now",e.jsx(Y,{className:"transform transition-transform group-hover:translate-x-1"})]})]})]})]})]}),Ve="/assets/logo-C1QssirI.png",ie=he({name:"auth",initialState:{user:null,userAuth:!1,token:null},reducers:{login(s,r){s.user=r.payload.user,s.userAuth=!0,s.token=r.payload.accessToken,localStorage.setItem("user",JSON.stringify(r.payload.user)),localStorage.setItem("token",r.payload.accessToken)},logout(s){s.user=null,s.userAuth=!1,s.token=null,localStorage.removeItem("user"),localStorage.removeItem("token")}}}),{login:J,logout:ne}=ie.actions,O=s=>s.auth.user,Ye=s=>s.auth.userAuth,Ke=ie.reducer,Xe=()=>{const[s,r]=o.useState(!1),t=I(),f=$(),d=F(Ye),m=F(O),g=()=>{f(ne()),t("/login"),r(!1)},j=()=>{r(!s)},l=()=>{r(!1)},i=[{to:"/",icon:e.jsx(ge,{}),label:"Home"},...d?[{to:`/users/${m==null?void 0:m._id}`,icon:e.jsx(be,{}),label:"Dashboard"}]:[],{to:"/products/allproducts",icon:e.jsx(B,{}),label:"Products"},{to:"/contact",icon:e.jsx(E,{}),label:"Contact"}];return e.jsx("header",{className:"bg-dark-primary/80 backdrop-blur-sm shadow-lg fixed w-full z-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[e.jsxs(k,{to:"/",className:"flex items-center space-x-4",children:[e.jsx("img",{src:Ve,alt:"SwapSpace Logo",className:"h-12 w-12 rounded-full transition-transform transform hover:scale-110"}),e.jsx("span",{className:"text-2xl font-bold text-light-blue",children:"SwapSpace"})]}),e.jsx("div",{className:"md:hidden",children:e.jsx("button",{onClick:j,className:"text-light-blue focus:outline-none",children:s?e.jsx(K,{size:24}):e.jsx(ye,{size:24})})}),e.jsxs("nav",{className:`
          fixed inset-0 bg-dark-primary/95 
          md:bg-transparent md:static 
          md:flex md:items-center 
          transform transition-transform duration-300 ease-in-out
          ${s?"translate-x-0":"translate-x-full"}
          md:translate-x-0
          flex flex-col md:flex-row
          p-6 md:p-0
          space-y-6 md:space-y-0 md:space-x-6
        `,children:[e.jsx("button",{onClick:l,className:"md:hidden self-end text-light-blue mb-4",children:e.jsx(K,{size:24})}),i.map((c,u)=>e.jsxs(k,{to:c.to,onClick:l,className:"text-gray-300 hover:text-light-blue flex items-center space-x-2",children:[c.icon,e.jsx("span",{children:c.label})]},u)),e.jsx("div",{className:"mt-4 md:mt-0 flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-4",children:d?e.jsxs("button",{onClick:g,className:"w-full md:w-auto bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 flex items-center justify-center space-x-2",children:[e.jsx(fe,{}),e.jsx("span",{children:"Logout"})]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{to:"/login",onClick:l,className:"w-full md:w-auto bg-light-blue text-dark-primary px-4 py-2 rounded-lg hover:bg-opacity-90 text-center",children:"Login"}),e.jsx(k,{to:"/signup",onClick:l,className:"w-full md:w-auto border border-light-blue text-light-blue px-4 py-2 rounded-lg hover:bg-light-blue hover:text-dark-primary text-center",children:"Sign Up"})]})})]})]})})},Ze=()=>{const s=[{name:"LinkedIn",url:"#",icon:e.jsx(je,{size:24})},{name:"Twitter",url:"#",icon:e.jsx(Ne,{size:24})},{name:"GitHub",url:"#",icon:e.jsx(ve,{size:24})}],r=[{name:"Home",path:"/"},{name:"About",path:"/about"},{name:"Services",path:"/services"},{name:"Contact",path:"/contact"}];return e.jsx("footer",{className:"bg-gradient-primary text-white py-8 border-t border-black",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"SwapSpace"}),e.jsx("p",{className:"text-sm text-gray-300 max-w-xs mx-auto md:mx-0",children:"A Platform to Buy and Sell Products for the NIT Raipur Students."})]}),e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 max-w-xs mx-auto md:mx-0",children:r.map(t=>e.jsx(k,{to:t.path,className:"text-sm text-gray-300 hover:text-yellow-300 transition-colors duration-200 ease-in-out",children:t.name},t.name))})]}),e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Connect With Us"}),e.jsx("div",{className:"flex justify-center md:justify-start space-x-6",children:s.map(t=>e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-yellow-300 transition-colors duration-200 ease-in-out","aria-label":t.name,children:t.icon},t.name))})]})]}),e.jsx("div",{className:"border-t border-gray-700 mt-8 pt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-400",children:["© ",new Date().getFullYear()," SwapSpace. All Rights Reserved."]})})]})})},es={key:"root",version:1,storage:$e,whitelist:["auth"]},ss=we({auth:Ke}),ts=De(es,ss),_=ke({reducer:ts,middleware:s=>s({serializableCheck:{ignoredActions:[Pe,Ce,Ie,Ee,Fe,Le]}})}),rs=Se(_);se.defaults.withCredentials=!0;const N=se.create({baseURL:"https://swap-space-k1vm.vercel.app/api/v1",withCredentials:!0,headers:{"Content-Type":"application/json"}});N.interceptors.request.use(s=>{const r=_.getState().auth.token;return r&&(s.headers.Authorization=`Bearer ${r}`),s},s=>Promise.reject(s));N.interceptors.response.use(s=>s,s=>(s.response&&s.response.status===401&&(_.dispatch(ne()),window.location.href="/login"),Promise.reject(s)));const as=()=>{const[s,r]=o.useState(!1),[t,f]=o.useState(!1),d=I(),m=$(),{register:g,handleSubmit:j,formState:{errors:l}}=q(),i=async c=>{var u,a;r(!0);try{const n={email:c.email,password:c.password},x=await N.post("/users/login",c);m(J({user:x.data.data.user,accessToken:x.data.data.accessToken})),d("/")}catch(n){console.error("Login error:",{status:(u=n.response)==null?void 0:u.status,data:(a=n.response)==null?void 0:a.data,message:n.message})}finally{r(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 bg-gradient-primary",children:e.jsxs("div",{className:"max-w-md w-full bg-dark-primary/90 backdrop-blur-sm p-10 rounded-xl shadow-2xl border border-dark-primary/50",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-light-blue",children:"Welcome Back !!"}),e.jsx("p",{className:"mt-2 text-sm text-gray-300",children:"Sign in to access your account"})]}),e.jsxs("form",{onSubmit:j(i),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(A,{className:"text-gray-400"})}),e.jsx("input",{type:"email",...g("email",{required:"Email is required",pattern:{value:/\S+@\S+\.\S+/,message:"Invalid email address"}}),className:`
                  appearance-none block w-full px-4 py-3 pl-10
                  bg-dark-primary border rounded-lg
                  ${l.email?"border-red-500":"border-slate-gray"}
                  text-white placeholder-gray-400
                  focus:outline-none focus:ring-2 focus:ring-light-blue
                `,placeholder:"you@example.com"})]}),l.email&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:l.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(te,{className:"text-gray-400"})}),e.jsx("input",{type:t?"text":"password",...g("password",{required:"Password is required"}),className:`
                  appearance-none block w-full px-4 py-3 pl-10 pr-10
                  bg-dark-primary border rounded-lg
                  ${l.password?"border-red-500":"border-slate-gray"}
                  text-white placeholder-gray-400
                  focus:outline-none focus:ring-2 focus:ring-light-blue
                `,placeholder:"********"}),e.jsx("button",{type:"button",onClick:()=>f(!t),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400",children:t?e.jsx(re,{}):e.jsx(ae,{})})]}),l.password&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:l.password.message})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:s,className:`
                w-full py-3 rounded-lg text-dark-primary font-semibold
                ${s?"bg-gray-600 cursor-not-allowed":"bg-light-blue hover:bg-opacity-90"}
                transition-all duration-300
              `,children:s?"Logging In...":"Login"})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:["Don't have an account? "," ",e.jsx(k,{to:"/signup",className:"text-light-blue hover:underline",children:"Sign Up"})]}),e.jsx("div",{className:"mt-2 text-sm text-gray-300",children:e.jsx(k,{to:"/forgot-password",className:"text-light-blue hover:underline",children:"Forgot Password?"})})]})]})]})})},ls=()=>{const[s,r]=o.useState(!1),[t,f]=o.useState(!1),d=I(),m=$(),{register:g,handleSubmit:j,formState:{errors:l}}=q(),i=async c=>{var u,a;r(!0);try{const n={name:c.name,email:c.email,password:c.password},x=await N.post("/users/register",n);(u=x==null?void 0:x.data)!=null&&u.success?(m(J({user:x.data.user,accessToken:x.data.token})),d("/")):console.error("Signup failed:",(a=x==null?void 0:x.data)==null?void 0:a.message)}catch(n){console.error("Signup error:",n)}finally{r(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 bg-gradient-primary",children:e.jsxs("div",{className:"max-w-md w-full bg-dark-primary/90 backdrop-blur-sm p-10 rounded-xl shadow-2xl border border-dark-primary/50",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-light-blue",children:"Create Your Account"}),e.jsx("p",{className:"mt-2 text-sm text-gray-300",children:"Sign up to start buying and selling items"})]}),e.jsxs("form",{onSubmit:j(i),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(qe,{className:"text-gray-400"})}),e.jsx("input",{type:"text",...g("name",{required:"Name is required",minLength:{value:2,message:"Name must be at least 2 characters"}}),className:`
                  appearance-none block w-full px-4 py-3 pl-10
                  bg-dark-primary border rounded-lg
                  ${l.name?"border-red-500":"border-slate-gray"}
                  text-white placeholder-gray-400
                  focus:outline-none focus:ring-2 focus:ring-light-blue
                `,placeholder:"John Doe"})]}),l.name&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:l.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(A,{className:"text-gray-400"})}),e.jsx("input",{type:"email",...g("email",{required:"Email is required",pattern:{value:/\S+@\S+\.\S+/,message:"Invalid email address"}}),className:`
                  appearance-none block w-full px-4 py-3 pl-10
                  bg-dark-primary border rounded-lg
                  ${l.email?"border-red-500":"border-slate-gray"}
                  text-white placeholder-gray-400
                  focus:outline-none focus:ring-2 focus:ring-light-blue
                `,placeholder:"you@example.com"})]}),l.email&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:l.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(te,{className:"text-gray-400"})}),e.jsx("input",{type:t?"text":"password",...g("password",{required:"Password is required",minLength:{value:8,message:"Password must be at least 8 characters"}}),className:`
                  appearance-none block w-full px-4 py-3 pl-10 pr-10
                  bg-dark-primary border rounded-lg
                  ${l.password?"border-red-500":"border-slate-gray"}
                  text-white placeholder-gray-400
                  focus:outline-none focus:ring-2 focus:ring-light-blue
                `,placeholder:"********"}),e.jsx("button",{type:"button",onClick:()=>f(!t),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400",children:t?e.jsx(re,{}):e.jsx(ae,{})})]}),l.password&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:l.password.message})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:s,className:`
                w-full py-3 rounded-lg text-dark-primary font-semibold
                ${s?"bg-gray-600 cursor-not-allowed":"bg-light-blue hover:bg-opacity-90"}
                transition-all duration-300
              `,children:s?"Signing Up...":"Create Account"})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:["Already have an account? "," ",e.jsx(k,{to:"/login",className:"text-light-blue hover:underline",children:"Log In"})]})})]})]})})},is=()=>{const[s,r]=o.useState(!1),[t,f]=o.useState([]),[d,m]=o.useState([]),g=I(),{register:j,handleSubmit:l,formState:{errors:i}}=q();o.useEffect(()=>{(async()=>{try{const x=await N.get("/categories/getallcategories");m(x.data.data.map(p=>({_id:p._id,name:p.name})))}catch(x){console.error("Failed to fetch categories:",x)}})()},[]);const c=d.map(n=>({name:n.name,value:n.name})),u=n=>{const p=Array.from(n.target.files).filter(h=>h.type.startsWith("image/")&&h.size<=5*1024*1024);if(p.length>4){alert("Maximum 4 images allowed");return}f(p)},a=async n=>{var x;r(!0);try{const p=new FormData;console.log("Selected Category:",n.category),Object.keys(n).forEach(b=>{p.append(b,n[b])}),t.forEach((b,C)=>{p.append("images",b)});const h=await N.post("/products/add-product",p,{headers:{"Content-Type":"multipart/form-data"}});g("/")}catch(p){console.error("Product creation error:",((x=p.response)==null?void 0:x.data)||p.message)}finally{r(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-primary py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto bg-dark-primary/90 rounded-xl shadow-2xl p-8",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h2",{className:"text-3xl font-bold text-light-blue",children:"List Your Product"}),e.jsx("p",{className:"mt-2 text-gray-300",children:"Share your item with the SwapSpace community"})]}),e.jsxs("form",{onSubmit:l(a),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Product Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(D,{className:"text-gray-400"})}),e.jsx("input",{type:"text",...j("name",{required:"Product name is required",minLength:{value:3,message:"Product name must be at least 3 characters"}}),className:`
                  appearance-none block w-full px-4 py-3 pl-10
                  bg-dark-primary border rounded-lg
                  ${i.name?"border-red-500":"border-slate-gray"}
                  text-white placeholder-gray-400
                  focus:outline-none focus:ring-2 focus:ring-light-blue
                `,placeholder:"Enter product name"})]}),i.name&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:i.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Price"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Q,{className:"text-gray-400"})}),e.jsx("input",{type:"number",...j("price",{required:"Price is required",min:{value:1,message:"Price must be greater than 0"}}),className:`
                  appearance-none block w-full px-4 py-3 pl-10
                  bg-dark-primary border rounded-lg
                  ${i.price?"border-red-500":"border-slate-gray"}
                  text-white placeholder-gray-400
                  focus:outline-none focus:ring-2 focus:ring-light-blue
                `,placeholder:"Enter price"})]}),i.price&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:i.price.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-3 left-0 pl-3 pointer-events-none",children:e.jsx(B,{className:"text-gray-400"})}),e.jsx("textarea",{...j("description",{required:"Description is required",minLength:{value:10,message:"Description must be at least 10 characters"}}),className:`
                  appearance-none block w-full px-4 py-3 pl-10
                  bg-dark-primary border rounded-lg
                  ${i.description?"border-red-500":"border-slate-gray"}
                  text-white placeholder-gray-400
                  focus:outline-none focus:ring-2 focus:ring-light-blue
                  h-32
                `,placeholder:"Describe your product in detail"})]}),i.description&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:i.description.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Quantity"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(z,{className:"text-gray-400"})}),e.jsx("input",{type:"number",...j("quantity",{required:"Quantity is required",min:{value:1,message:"Quantity must be greater than 0"}}),className:`
                  appearance-none block w-full px-4 py-3 pl-10
                  bg-dark-primary border rounded-lg
                  ${i.quantity?"border-red-500":"border-slate-gray"}
                  text-white placeholder-gray-400
                  focus:outline-none focus:ring-2 focus:ring-light-blue
                `,placeholder:"Enter quantity"})]}),i.quantity&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:i.quantity.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Category"}),e.jsxs("select",{...j("category",{required:"Category is required"}),className:`
              block w-full px-4 py-3 bg-dark-primary border rounded-lg
              ${i.category?"border-red-500":"border-slate-gray"}
              text-white placeholder-gray-400
              focus:outline-none focus:ring-2 focus:ring-light-blue
            `,children:[e.jsx("option",{value:"",children:"Select a category"}),c.map((n,x)=>e.jsx("option",{value:n.name,children:n.name},n._id||x))]}),i.category&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:i.category.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Product Images"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:u,className:"block w-full text-white bg-dark-primary border rounded-lg"}),t.length>0&&e.jsxs("p",{className:"mt-2 text-sm text-gray-300",children:[t.length," image(s) selected"]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:`w-full py-3 rounded-lg text-white bg-light-blue hover:bg-blue-600 focus:outline-none ${s?"opacity-50 cursor-not-allowed":""}`,disabled:s,children:s?"Creating...":"Create Product"})})]})]})})},ns=({productId:s})=>{const[r,t]=o.useState([]),[f,d]=o.useState(!1),[m,g]=o.useState(null);o.useEffect(()=>{(async()=>{var c,u;try{d(!0);const a=await N.get(`/orders/product-orders/${s}`);console.log("Full response:",a),t(a.data.data),console.log(r)}catch(a){g(((u=(c=a.response)==null?void 0:c.data)==null?void 0:u.message)||"Failed to fetch orders")}finally{d(!1)}})()},[s]);const j=async i=>{try{await N.post("/orders/accept-order",{orderId:i}),t(c=>c.filter(u=>u._id!==i))}catch{}},l=async i=>{try{await N.post("/orders/reject-order",{orderId:i}),t(c=>c.filter(u=>u._id!==i))}catch{}};return f?e.jsx("div",{children:"Loading orders..."}):m?e.jsx("div",{className:"text-red-500",children:m}):r.length===0?e.jsx("div",{children:"No pending orders"}):e.jsxs("div",{className:"space-y-4 mt-8",children:[e.jsxs("h3",{className:"text-2xl font-bold text-light-blue mb-4",children:["Pending Orders (",r.length,")"]}),r.map(i=>{var c,u;return e.jsxs("div",{className:"bg-dark-primary/80 rounded-lg p-4 border border-slate-gray",children:[e.jsxs("div",{className:"bg-dark-primary/50 rounded-lg p-4 space-y-2",children:[e.jsx("h5",{className:"text-light-blue font-semibold",children:"Buyer Details"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"text-light-blue"}),e.jsx(k,{to:`/users/${(c=i.buyerDetails)==null?void 0:c._id}`,className:"text-white hover:text-light-blue hover:underline",children:((u=i.buyerDetails)==null?void 0:u.name)||"Unknown Buyer"})]})]}),e.jsxs("div",{className:"flex space-x-4 mt-4",children:[e.jsxs("button",{onClick:()=>j(i._id),className:`\r
                              w-1/2 py-2 \r
                              bg-green-600 text-white \r
                              rounded-lg \r
                              flex items-center justify-center \r
                              space-x-2 \r
                              hover:bg-green-700\r
                          `,children:[e.jsx(Re,{}),e.jsx("span",{children:"Accept Order"})]}),e.jsxs("button",{onClick:()=>l(i._id),className:`\r
                              w-1/2 py-2 \r
                              bg-red-600 text-white \r
                              rounded-lg \r
                              flex items-center justify-center \r
                              space-x-2 \r
                              hover:bg-red-700\r
                          `,children:[e.jsx(Ue,{}),e.jsx("span",{children:"Reject Order"})]})]})]},i._id)})]})},os=()=>{var p;const[s,r]=o.useState(null),[t,f]=o.useState([]),[d,m]=o.useState(!0),[g,j]=o.useState(null),{productId:l}=M(),i=I(),c=F(O),u=(c==null?void 0:c._id)===((p=s==null?void 0:s.owner)==null?void 0:p._id);o.useEffect(()=>{l&&(async()=>{var b,C;try{const P=await N.get("/users/current-user")}catch(P){console.error("Error fetching current user details:",P),i("/login")}try{m(!0);const P=await N.get(`/products/get-product/${l}`);r(P.data.data),m(!1)}catch(P){console.error("Error fetching product details:",P),j(((C=(b=P.response)==null?void 0:b.data)==null?void 0:C.message)||"Failed to fetch product"),m(!1)}})()},[l]),o.useEffect(()=>{(async()=>{try{const b=await N.get("/users/user-order-history");console.log(b.data.data.orderHistory),f(b.data.data.orderHistory)}catch(b){console.error("Error fetching user-order-history details:",b)}})()},[]);const a=()=>t.some(h=>h.product===s._id&&h.orderStatus==="Pending");if(d)return e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-light-blue"})});if(g)return e.jsx("div",{className:"flex justify-center items-center min-h-screen text-red-500",children:g});if(!s)return null;const n=async()=>{try{const b=(await N.get("/users/current-user")).data.data;if(b._id===s.owner._id)return alert("Both Buyer and Seller are Same!");const C=await N.post("/orders/place-order",{buyer:b._id,seller:s.owner._id,product:s._id,quantity:s.quantity,price:s.price});console.log(C.data)}catch(h){console.error("Error buying product:",h)}},x=async()=>{try{const h=t.find(P=>P.product===s._id&&P.orderStatus==="Pending");if(!h){alert("No order found for this product");return}const b=await N.post("/orders/cancel-order",{orderId:h._id,productId:h.product}),C=await N.get("/users/user-order-history");f(C.data.data.orderHistory),r(P=>({...P,productStatus:"Available"}))}catch(h){console.error("Error cancelling order:",h),alert("Failed to cancel order")}};return e.jsx("div",{className:"min-h-screen bg-gradient-primary py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto bg-dark-primary/90 rounded-xl shadow-2xl p-8 grid md:grid-cols-2 gap-8",children:[e.jsx("div",{children:e.jsx(Ae,{navigation:!0,modules:[Oe],className:"product-swiper rounded-xl",children:s.productImages.map((h,b)=>e.jsx(_e,{children:e.jsx("img",{src:h,alt:`Product ${b+1}`,className:"w-full h-96 object-cover rounded-xl"})},b))})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-light-blue mb-4",children:s.name}),u&&e.jsxs(k,{to:`/products/edit/${s._id}`,className:`\r
                bg-light-blue text-dark-primary \r
                px-4 py-2 rounded-lg \r
                flex items-center space-x-2\r
                hover:bg-opacity-90\r
              `,children:[e.jsx(G,{}),e.jsx("span",{children:"Edit Product"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"text-light-blue"}),e.jsxs("span",{className:"text-xl font-semibold text-white",children:["₹",s.price]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{className:"text-light-blue"}),e.jsxs("span",{className:"text-white",children:["Quantity: ",s.quantity]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(B,{className:"text-light-blue mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white",children:"Description"}),e.jsx("p",{className:"text-gray-300",children:s.description})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(D,{className:"text-light-blue"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white",children:"Category"}),e.jsx("p",{className:"text-gray-300",children:s.category.name})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(E,{className:"text-light-blue"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white",children:"Seller"}),e.jsx("p",{className:"text-gray-300",children:s.owner.name})]})]})]}),e.jsxs("div",{className:"mt-6 flex space-x-4",children:[e.jsx("button",{className:`\r
                w-full py-3 \r
                bg-blue-300 text-dark-primary \r
                rounded-lg font-semibold\r
                hover:border hover:border-light-blue hover:bg-blue-950 hover:text-light-blue\r
                transition-all\r
              `,children:"Contact Seller"}),a()?e.jsx("button",{onClick:x,className:`\r
                w-full py-3 \r
                bg-red-500 text-white \r
                rounded-lg font-semibold\r
                hover:bg-red-600\r
                transition-all\r
              `,children:"Cancel Order"}):e.jsx("button",{onClick:n,className:`\r
                w-full py-3 \r
                bg-blue-300 text-dark-primary \r
                rounded-lg font-semibold\r
                hover:border hover:border-light-blue hover:bg-blue-950 hover:text-light-blue\r
                transition-all\r
              `,children:"Buy Product"})]})]}),u&&e.jsx("div",{className:"md:col-span-2",children:e.jsx(ns,{productId:l})})]})})},cs=({product:s})=>e.jsxs("div",{className:"bg-dark-primary/80 rounded-xl overflow-hidden shadow-lg transform transition-all hover:scale-105 hover:shadow-2xl",children:[e.jsx("img",{src:s.productImages[0],alt:s.name,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-xl font-bold text-light-blue truncate",children:s.name}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("span",{className:"flex items-center text-white",children:[e.jsx(Q,{className:"mr-2 text-light-blue"}),"₹",s.price]}),e.jsxs("span",{className:"flex items-center text-gray-300",children:[e.jsx(z,{className:"mr-2 text-light-blue"}),s.quantity," left"]})]}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-gray-400 flex items-center",children:[e.jsx(D,{className:"mr-2 text-light-blue"}),s.category.name]}),e.jsx(k,{to:`/products/${s._id}`,className:"bg-light-blue text-dark-primary px-3 py-1 rounded-lg hover:bg-opacity-90 transition-all",children:"View Details"})]})]})]}),ds=()=>{const[s,r]=o.useState([]),[t,f]=o.useState([]),[d,m]=o.useState([]),[g,j]=o.useState(!0),[l,i]=o.useState({category:"",minPrice:"",maxPrice:"",searchQuery:""}),c=I();o.useEffect(()=>{(async()=>{var n;try{await N.get("/users/current-user");const x=await N.get("/products/get-all-products");r(x.data.data);const p=await N.get("/categories/getallcategories");m(p.data.data),j(!1)}catch(x){console.error("Error fetching data:",x),((n=x.response)==null?void 0:n.status)===401&&c("/login"),j(!1)}})()},[c]),o.useEffect(()=>{let a=s;l.category&&(a=a.filter(n=>n.category.name===l.category)),l.minPrice&&(a=a.filter(n=>n.price>=parseFloat(l.minPrice))),l.maxPrice&&(a=a.filter(n=>n.price<=parseFloat(l.maxPrice))),l.searchQuery&&(a=a.filter(n=>n.name.toLowerCase().includes(l.searchQuery.toLowerCase())||n.category.name.toLowerCase().includes(l.searchQuery.toLowerCase()))),f(a)},[s,l]);const u=a=>{const{name:n,value:x}=a.target;i(p=>({...p,[n]:x}))};return g?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-light-blue"})}):e.jsx("div",{className:"min-h-screen bg-gradient-primary py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsxs("div",{className:"mb-8 grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Te,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",name:"searchQuery",value:l.searchQuery,onChange:u,placeholder:"Search products...",className:"w-full pl-10 pr-4 py-2 rounded-lg bg-dark-primary border border-slate-gray text-white"})]}),e.jsxs("select",{name:"category",value:l.category,onChange:u,className:"w-full px-4 py-2 rounded-lg bg-dark-primary border border-slate-gray text-white",children:[e.jsx("option",{value:"",children:"All Categories"}),d.map(a=>e.jsx("option",{value:a.name,children:a.name},a._id))]}),e.jsx("input",{type:"number",name:"minPrice",value:l.minPrice,onChange:u,placeholder:"Min Price",className:"w-full px-4 py-2 rounded-lg bg-dark-primary border border-slate-gray text-white"}),e.jsx("input",{type:"number",name:"maxPrice",value:l.maxPrice,onChange:u,placeholder:"Max Price",className:"w-full px-4 py-2 rounded-lg bg-dark-primary border border-slate-gray text-white"})]}),t.length===0?e.jsx("div",{className:"text-center text-white text-2xl",children:"No products found"}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map(a=>e.jsx(cs,{product:a},a._id))})]})})},ms=()=>{const{userId:s}=M(),r=F(O),[t,f]=o.useState(null),[d,m]=o.useState("profile"),[g,j]=o.useState(!0),[l,i]=o.useState(null),c=(r==null?void 0:r._id)===s;o.useEffect(()=>{(async()=>{var n,x;try{j(!0);const p=await N.get(`/users/profile/${s}`);f(p.data.data),i(null)}catch(p){console.error("Error fetching user data:",p),i(((x=(n=p.response)==null?void 0:n.data)==null?void 0:x.message)||"Failed to fetch user profile")}finally{j(!1)}})()},[s]);const u=()=>{var a,n;switch(d){case"profile":return e.jsxs("div",{className:"bg-dark-primary/80 p-6 rounded-lg space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-light-blue mb-4",children:"Profile Details"}),e.jsx(L,{icon:e.jsx(E,{className:"text-light-blue mr-3"}),label:"Name",value:t.name}),e.jsx(L,{icon:e.jsx(A,{className:"text-light-blue mr-3"}),label:"Email",value:t.email}),t.phoneNumber&&e.jsx(L,{icon:e.jsx(le,{className:"text-light-blue mr-3"}),label:"Phone",value:t.phoneNumber}),t.instaID&&e.jsx(L,{icon:e.jsx(X,{className:"text-light-blue mr-3"}),label:"Instagram",value:t.instaID})]});case"orders":return e.jsxs("div",{className:"bg-dark-primary/80 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold text-light-blue mb-4",children:"Order History"}),((a=t.orderHistory)==null?void 0:a.length)===0?e.jsx(ee,{message:"No orders found"}):e.jsx(us,{orders:t.orderHistory})]});case"products":return e.jsxs("div",{className:"bg-dark-primary/80 p-6 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-light-blue",children:"My Products"}),c&&e.jsx(k,{to:"/add-product",className:"bg-light-blue text-dark-primary px-4 py-2 rounded-lg hover:bg-opacity-90",children:"+ Add Product"})]}),((n=t.productHistory)==null?void 0:n.length)===0?e.jsx(ee,{message:"No products listed"}):e.jsx(xs,{products:t.productHistory})]});default:return null}};return g?e.jsx(ps,{}):l?e.jsx(hs,{message:l}):e.jsx("div",{className:"min-h-screen bg-gradient-primary py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-dark-primary/90 rounded-t-xl p-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden",children:e.jsx("img",{src:t.profileImage||"/default-avatar.png",alt:"Profile",className:"w-full h-full object-cover"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-light-blue",children:t.name}),e.jsx("p",{className:"text-gray-400",children:t.email})]})]}),c&&e.jsxs(k,{to:`/users/edit/${t._id}`,className:"bg-light-blue text-dark-primary px-4 py-2 rounded-lg hover:bg-opacity-90 flex items-center",children:[e.jsx(G,{className:"mr-2"})," Edit Profile"]})]}),c&&e.jsx("div",{className:"bg-dark-primary/80 border-b border-slate-gray flex",children:[{key:"profile",icon:E,label:"Profile"},{key:"orders",icon:H,label:"Order History"},{key:"products",icon:X,label:"My Products"}].map(a=>e.jsx(gs,{isActive:d===a.key,onClick:()=>m(a.key),icon:a.icon,label:a.label},a.key))}),e.jsx("div",{className:"mt-6",children:u()})]})})},L=({icon:s,label:r,value:t})=>e.jsxs("div",{className:"flex items-center",children:[s,e.jsxs("div",{children:[e.jsxs("span",{className:"text-light-blue mr-2",children:[r,":"]}),e.jsx("span",{className:"text-white",children:t})]})]}),us=({orders:s})=>e.jsx("div",{className:"space-y-4",children:s.map(r=>{var t;return e.jsx("div",{className:"bg-dark-primary border border-slate-gray rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-white font-semibold",children:["Order for ",((t=r.productDetails)==null?void 0:t.name)||"Product"]}),e.jsxs("p",{className:"text-gray-400",children:["Status: ",r.orderStatus]})]}),e.jsxs("span",{className:"text-light-blue font-bold",children:["₹",r.price]})]})},r._id)})}),xs=({products:s})=>e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:s.map(r=>e.jsxs("div",{className:"bg-dark-primary border border-slate-gray rounded-lg p-4",children:[e.jsx("img",{src:r.productImages[0],alt:r.name,className:"w-full h-40 object-cover rounded-lg mb-4"}),e.jsxs("div",{className:"flex justify-between items-center",children:[" ",e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:r.name}),e.jsxs("p",{className:"text-gray-400",children:["Price: ₹",r.price]})]}),e.jsx(k,{to:`/products/${r._id}`,className:"bg-light-blue text-dark-primary px-2 py-1 rounded-lg hover:bg-opacity-90",children:"View"})]})]},r._id))}),ee=({message:s})=>e.jsx("div",{className:"text-center text-gray-400",children:e.jsx("p",{children:s})}),ps=()=>e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"loader"})}),hs=({message:s})=>e.jsx("div",{className:"text-red-500 text-center",children:e.jsx("p",{children:s})}),gs=({isActive:s,onClick:r,icon:t,label:f})=>e.jsxs("button",{onClick:r,className:`flex items-center p-4 transition-colors ${s?"bg-light-blue text-dark-primary":"text-gray-400 hover:bg-dark-primary/70"}`,children:[e.jsx(t,{className:"mr-2"}),f]}),bs=()=>{const s=I(),r=$(),t=F(O),[f,d]=o.useState(!1),[m,g]=o.useState(null),[j,l]=o.useState(null),{register:i,handleSubmit:c,setValue:u,formState:{errors:a}}=q();o.useEffect(()=>{t&&(u("name",t.name),u("email",t.email),u("phoneNumber",t.phoneNumber||""),u("instaID",t.instaID||""))},[t,u]);const n=p=>{const h=p.target.files[0];if(h){g(h);const b=new FileReader;b.onloadend=()=>{l(b.result)},b.readAsDataURL(h)}},x=async p=>{d(!0);try{const h=new FormData;h.append("name",p.name),h.append("email",p.email),p.phoneNumber&&h.append("phoneNumber",p.phoneNumber),p.instaID&&h.append("instaID",p.instaID),m&&(console.log("Profile Image File:",m),h.append("profileImage",m));const b=await N.patch("/users/update-profile",h,{headers:{"Content-Type":"multipart/form-data"}});r(J({user:b.data.data,accessToken:t.accessToken})),console.log("User Data updated successfully"),s(`/users/${t._id}`)}catch(h){console.error("Profile update error:",h)}finally{d(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-primary py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto bg-dark-primary/90 rounded-xl shadow-2xl p-8",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h2",{className:"text-3xl font-bold text-light-blue",children:"Edit Profile"}),e.jsx("p",{className:"mt-2 text-gray-300",children:"Update your personal information"})]}),e.jsxs("form",{onSubmit:c(x),className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:n,className:"hidden",id:"profileImageUpload"}),e.jsx("label",{htmlFor:"profileImageUpload",className:"cursor-pointer",children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:j||(t==null?void 0:t.profileImage)||"/default-avatar.png",alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-light-blue"}),e.jsx("div",{className:"absolute bottom-0 right-0 bg-light-blue text-dark-primary p-2 rounded-full",children:e.jsx(G,{})})]})})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(E,{className:"text-gray-400"})}),e.jsx("input",{type:"text",...i("name",{required:"Name is required",minLength:{value:2,message:"Name must be at least 2 characters"}}),className:`
                  appearance-none block w-full px-4 py-3 pl-10
                  bg-dark-primary border rounded-lg
                  ${a.name?"border-red-500":"border-slate-gray"}
                  text-white placeholder-gray-400
                  focus:outline-none focus:ring-2 focus:ring-light-blue
                `,placeholder:"Enter your full name"})]}),a.name&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:a.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(A,{className:"text-gray-400"})}),e.jsx("input",{type:"email",...i("email",{required:"Email is required",pattern:{value:/\S+@\S+\.\S+/,message:"Invalid email address"}}),className:`
                  appearance-none block w-full px-4 py-3 pl-10
                  bg-dark-primary border rounded-lg
                  ${a.email?"border-red-500":"border-slate-gray"}
                  text-white placeholder-gray-400
                  focus:outline-none focus:ring-2 focus:ring-light-blue
                `,placeholder:"Enter your email"})]}),a.email&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:a.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(le,{className:"text-gray-400"})}),e.jsx("input",{type:"tel",...i("phoneNumber",{pattern:{value:/^[0-9]{10}$/,message:"Invalid phone number, must be 10 digits"}}),className:`
                  appearance-none block w-full px-4 py-3 pl-10
                  bg-dark-primary border rounded-lg
                  ${a.phoneNumber?"border-red-500":"border-slate-gray"}
                  text-white placeholder-gray-400
                  focus:outline-none focus:ring-2 focus:ring-light-blue
                `,placeholder:"Enter your phone number"})]}),a.phoneNumber&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:a.phoneNumber.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Instagram ID"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(He,{className:"text-gray-400"})}),e.jsx("input",{type:"text",...i("instaID"),className:`
                  appearance-none block w-full px-4 py-3 pl-10
                  bg-dark-primary border rounded-lg
                  ${a.instaID?"border-red-500":"border-slate-gray"}
                  text-white placeholder-gray-400
                  focus:outline-none focus:ring-2 focus:ring-light-blue
                `,placeholder:"Enter your Instagram ID"})]}),a.instaID&&e.jsx("p",{className:"mt-2 text-sm text-red-400",children:a.instaID.message})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"w-full py-3 bg-light-blue text-dark-primary font-semibold rounded-lg hover:bg-light-blue/80 transition duration-200",disabled:f,children:f?"Updating...":"Update Profile"})})]})]})})},ys=()=>{const{productId:s}=M(),r=I(),[t,f]=o.useState(""),[d,m]=o.useState(""),[g,j]=o.useState(""),[l,i]=o.useState(""),[c,u]=o.useState(""),[a,n]=o.useState([]),[x,p]=o.useState([]),[h,b]=o.useState([]),[C,P]=o.useState([]),[R,W]=o.useState(!1),[V,U]=o.useState(null);o.useEffect(()=>{(async()=>{try{const S=(await N.get(`/products/get-product/${s}`)).data.data;f(S.name),m(S.price),j(S.description),i(S.category.name),u(S.quantity),n(S.productImages);const v=await N.get("/categories/getallcategories");P(v.data.data)}catch(w){U("Failed to fetch product details"),console.error(w)}})()},[s]);const oe=y=>{const w=Array.from(y.target.files),S=w.map(v=>URL.createObjectURL(v));p(v=>[...v,...w]),b(v=>[...v,...S])},ce=y=>{n(w=>w.filter(S=>S!==y))},de=y=>{p(w=>w.filter((S,v)=>v!==y)),b(w=>w.filter((S,v)=>v!==y))},me=async y=>{var w,S;y.preventDefault(),W(!0),U(null);try{const v=new FormData;v.append("name",t),v.append("price",d),v.append("description",g),v.append("category",l),v.append("quantity",c),v.append("productImages",JSON.stringify(a)),x.forEach(ue=>{v.append("images",ue)});const Es=await N.patch(`/products/update-product/${s}`,v,{headers:{"Content-Type":"multipart/form-data"}});r(`/products/${s}`)}catch(v){U(((S=(w=v.response)==null?void 0:w.data)==null?void 0:S.message)||"Failed to update product"),W(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-primary py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto bg-dark-primary/90 rounded-xl p-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-light-blue mb-8",children:"Edit Product"}),V&&e.jsx("div",{className:"bg-red-500/20 border border-red-500 text-red-300 p-4 rounded-lg mb-6",children:V}),e.jsxs("form",{onSubmit:me,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Product Name"}),e.jsx("input",{type:"text",value:t,onChange:y=>f(y.target.value),required:!0,className:"w-full px-4 py-3 bg-dark-primary border border-slate-gray rounded-lg text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Price"}),e.jsx("input",{type:"number",value:d,onChange:y=>m(y.target.value),required:!0,className:"w-full px-4 py-3 bg-dark-primary border border-slate-gray rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Quantity"}),e.jsx("input",{type:"number",value:c,onChange:y=>u(y.target.value),required:!0,className:"w-full px-4 py-3 bg-dark-primary border border-slate-gray rounded-lg text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Category"}),e.jsx("select",{value:l,onChange:y=>i(y.target.value),required:!0,className:"w-full px-4 py-3 bg-dark-primary border border-slate-gray rounded-lg text-white",children:C.map(y=>e.jsx("option",{value:y.name,children:y.name},y.name))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:g,onChange:y=>j(y.target.value),required:!0,rows:4,className:"w-full px-4 py-3 bg-dark-primary border border-slate-gray rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Product Images"}),e.jsx("div",{className:"grid grid-cols-4 gap-4 mb-4",children:a.map((y,w)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:y,alt:`Product Image ${w+1}`,className:"w-full h-32 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>ce(y),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:e.jsx(Z,{})})]},w))}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:oe,className:"mb-4"}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:h.map((y,w)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:y,alt:`New Image Preview ${w+1}`,className:"w-full h-32 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>de(w),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:e.jsx(Z,{})})]},w))})]}),e.jsx("button",{type:"submit",className:`w-full py-3 bg-blue-600 text-white rounded-lg ${R?"opacity-50 cursor-not-allowed":""}`,disabled:R,children:R?"Updating...":"Update Product"})]})]})})};function fs(){return e.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-primary",children:[e.jsx(Xe,{}),e.jsx("main",{className:"w-full pt-8",children:e.jsx("div",{className:"",children:e.jsx(Be,{})})}),e.jsx(Ze,{})]})}function js(){return e.jsx("div",{className:"pt-8",children:e.jsx(We,{})})}function Ns(){return e.jsx("div",{className:"pt-8",children:e.jsx(as,{})})}function vs(){return e.jsx("div",{className:"pt-8",children:e.jsx(ls,{})})}function ws(){return e.jsx("div",{className:"pt-8",children:e.jsx(is,{})})}function ks(){return e.jsx("div",{className:"pt-8",children:e.jsx(os,{})})}function Ss(){return e.jsx("div",{className:"pt-8",children:e.jsx(ds,{})})}function Ps(){return e.jsx("div",{className:"pt-8",children:e.jsx(ms,{})})}function Cs(){return e.jsx("div",{className:"pt-8",children:e.jsx(bs,{})})}const Is=Qe([{path:"/",element:e.jsx(fs,{}),children:[{path:"/",element:e.jsx(js,{})},{path:"/login",element:e.jsx(Ns,{})},{path:"/signup",element:e.jsx(vs,{})},{path:"/add-product",element:e.jsx(ws,{})},{path:"/products/:productId",element:e.jsx(ks,{})},{path:"/products/edit/:productId",element:e.jsx(ys,{})},{path:"/products/allproducts",element:e.jsx(Ss,{})},{path:"/users/:userId",element:e.jsx(Ps,{})},{path:"/users/edit/:userId",element:e.jsx(Cs,{})}]}]);ze.createRoot(document.getElementById("root")).render(e.jsx(o.StrictMode,{children:e.jsx(Me,{store:_,children:e.jsx(Ge,{loading:!1,persistor:rs,children:e.jsx(Je,{router:Is})})})}));
